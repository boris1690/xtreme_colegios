<div class="page-head">
    <h2>Monitorear Agrupado</h2>
    <ol class="breadcrumb">
        <li><a href="#">Inicio</a></li>
        <li><a href="#">Evaluación</a></li>
        <li class="active">Monitorear Agrupado</li>
    </ol>
</div>

<div class="cl-mcont">
    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="content" id="divBuscar">
                <div class="col-sm-4 col-md-4">
                    <label>Evaluación</label>
                    <select class="form-control clientes" ng-model="formCons.evaluacion">
                        <option ng-repeat="evaluacion in evaluaciones" value="{{evaluacion.eval_codigo}}" ng-selected="evaluacion.eval_codigo == evaluaciones[0].eval_codigo">{{evaluacion.eval_fechainicio}} - {{evaluacion.eval_fechafin}} </option>
                   </select>
                </div>
                <div class="col-sm-4 col-md-4">
                    <label>Area / Departamento</label>
                    <select class="form-control clientes" ng-model="formCons.departamento">
                        <option value="">Todas ...</option>
                        <option ng-repeat="departamento in departamentos" value="{{departamento.depa_codigo}}">{{departamento.depa_nombre}}</option>
                    </select>
                </div>

                <div class="col-sm-2 col-md-2">
                    <label>Estado</label>
                    <select class="form-control clientes" ng-model="formCons.estado">
                        <option value="">Todas ...</option>
                        <option value="P">Pendientes</option>
                        <option value="F">Finalizadas</option>
                        <option value="G">En proceso</option>
                    </select>
                </div>

                <div class="col-sm-2 col-md-2" style="padding-top:25px;">
                    <button type="button" class="btn btn-primary btn-flat md-close" ng-click="consultaEvaluaciones()" data-dismiss="modal" id="bucar_boletines">Consultar</button>
                </div>
                <div class="col-sm-12 col-md-12" style="padding-top:25px;">
                    <a class="btn btn-success btn-xs pull-right" onclick="$('#modal-tab-not').niftyModal('show');" data-original-title="Añadir" data-toggle="tooltip"><i class="fa fa-pencil"></i></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="content">
                <div>
                    <table class="table table-bordered" datatable="ng" dt-options="monitoreoagrupado.dtOptions" dt-column-defs="monitoreoagrupado.dtColumnDefs">
                        <thead>
                        <tr>
                            <th class="text-center"><strong>Evaluador</strong></th>
                            <th class="text-center"><strong>Evaluado</strong></th>
                            <th class="text-center"><strong>Sesgo</strong></th>
                            <th class="text-center"><strong>No Observado</strong></th>
                            <th class="text-center"><strong>Estado</strong></th>
                            <th class="text-center"><strong>Acciones</strong></th>
                        </tr>
                        </thead>
                        <tbody>
                            <!-- lista de usuarios -->
                            <!--<tr ng-repeat="evaluacion in listaEvaluaciones | filter:{eval_usua_estado:formCons.estado}" on-finish-render="initDataTable()">-->
                            <tr ng-repeat="evaluacion in listaEvaluaciones" on-finish-render="initDataTable()">
                                <td>{{evaluacion.usua_nombreevaluador}} {{evaluacion.usua_apellidoevaluador}}</td>
                                <td>{{evaluacion.usua_nombreevaluado}} {{evaluacion.usua_apellidoevaluado}}</td>
                                <td class="text-center" ng-class="evaluacion.sesgo>=70?'color-danger':''">{{evaluacion.sesgo | num}}%</td>
                                <td class="text-center" ng-class="evaluacion.observacion>=40?'color-danger':''">{{evaluacion.observacion | num}}%</td>
                                <td class="text-center">{{evaluacion.eval_usua_estado | estadoMonitoreo}}</td>
                                <td class="text-center"><a style="cursor: pointer" ng-click="limpiaEvaluacion(evaluacion)"><i class="fa fa-refresh"></i></a><a style="cursor: pointer" ng-click="eliminarEvaluacion(evaluacion)"><i class="fa fa-trash-o color-danger"></i></a></td>
                            </tr>
                        </tbody>
                    </table>


                </div>
            </div>
        </div>
    </div>
</div>
<!-- Nifty Modal -->
<div class="md-modal colored-header custom-width md-effect-9" id="modal-tab-not">
    <div class="md-content">
        <div class="modal-header">
            <h3>A&ntilde;adir Evaluaci&oacute;n</h3>
            <button type="button" class="close md-close" data-dismiss="modal" aria-hidden="true">&times;</button>
        </div>
        <div class="modal-body form">
            <form id="frmNoti" enctype="multipart/form-data">
                <input type="text" value="" name="txtCodiNoti" style="display:none"/>
                <div class="tab-container">
                    <!--<ul class="nav nav-tabs">
                        <li class="active"><a data-toggle="tab" href="#home" id="tabHome">Datos General</a></li>
                        <li class=""><a data-toggle="tab" href="#profile" id="tabProfile">Datos Específicos</a></li>
                        <li class=""><a data-toggle="tab" href="#listado" id="tabListado">Listado</a></li>
                    </ul>-->
                    <div class="tab-content">
                        <div id="home" class="tab-pane cont active">
                            <div class="form-group">
                                <label>Evaluador <span class="text-danger">*</span></label>
                                <select class="form-control insdustrias" ng-model="modelEvaluador">
                                    <option ng-repeat="evaluador in evaluadores" value="{{evaluador.usua_codigo}}" ng-selected="evaluador.usua_codigo == evaluadores[0].usua_codigo">{{evaluador.usua_nombre}} {{evaluador.usua_apellido}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Evaluado <span class="text-danger">*</span></label>
                                <select class="form-control insdustrias" ng-model="modelEvaluado">
                                    <option ng-repeat="evaluado in evaluados" value="{{evaluado.usua_codigo}}" ng-selected="evaluado.usua_codigo == evaluados[0].usua_codigo">{{evaluado.usua_nombre}} {{evaluado.usua_apellido}}</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Relacion <span class="text-danger">*</span></label>
                                <select class="form-control insdustrias" ng-model="modelRelacion">
                                    <option ng-repeat="relacion in relaciones" value="{{relacion.rela_codigo}}" ng-selected="relacion.rela_codigo == relaciones[0].rela_codigo">{{relacion.rela_nombre}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-default btn-flat md-close" data-dismiss="modal">Salir</button>
        <button type="button" class="btn btn-primary btn-flat" ng-click="ingresarEvaluacion()" data-dismiss="modal">Registrar</button>
    </div>
</div>
</div>
<div class="md-overlay"></div>